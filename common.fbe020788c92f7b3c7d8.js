(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{6233:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r("ug5D"))},CB3U:function(e,t,r){"use strict";r.r(t);var n=r("ZBkt"),o=r("MGeu");r.d(t,"AngularFireAuth",function(){return n.a}),r.d(t,"AngularFireAuthModule",function(){return o.a})},Oipj:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r("CB3U"))},TqVw:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(){function e(){}return e.prototype.Distributor=function(e,t,r,n,o,s,a,i,u,l,c){this.$key=e,this.displayName=t,this.emailid=r,this.password=n,this.contactNo=o,this.role=s,this.regDate=a,this.dealerLocation=i,this.city=u,this.url=l,this.status=c},e}()},kmKP:function(e,t,r){"use strict";r.d(t,"a",function(){return f}),r("Oipj"),r("6233");var n=r("TqVw"),o=r("F/XL"),s=r("67Y/"),a=r("15JJ"),i=r("CcnG"),u=r("ZBkt"),l=r("3iKN"),c=r("ZYCi"),f=function(){function e(e,t,r){var i=this;this.afAuth=e,this.afDb=t,this.router=r,this.selectdistributor=new n.a,this.uid=this.afAuth.authState.pipe(Object(s.a)(function(e){return e?e.uid:null})),this.isAdmin=this.uid.pipe(Object(a.a)(function(e){return e?(console.log(i.afDb.object("/retailers/"+e+"/role").valueChanges()),i.afDb.object("/retailers/"+e+"/role").valueChanges()):Object(o.a)(!1)}))}return e.prototype.loginUser=function(e,t){var r=this,n=!1;return this.afAuth.auth.signInWithEmailAndPassword(e,t).then(function(e){var t=e.user.uid;localStorage.setItem("userId",e.user.uid);var o=r.getUserRole(t);console.log("User role from login metheod..",o),n=!0,r.message=t}).catch(function(e){r.message=e.message}),console.log(n,"from service class"),n},e.prototype.loginUser1=function(e,t){var r=this;this.afAuth.auth.signInWithEmailAndPassword(e,t).then(function(e){var t=e.user.uid;localStorage.setItem("userId",e.user.uid),localStorage.setItem("isUserLogin","true"),r.getUserFullDetails(t);var n=r.getUserRole(t);console.log("User role from login metheod..",n),r.message=t,r.router.navigate(["/dashboard"])}).catch(function(e){r.message=e.message,alert(e.message)})},e.prototype.isAdminUser=function(){return!0},e.prototype.signOut=function(){this.afAuth.auth.signOut()},e.prototype.getUserRole=function(e){var t=this;this.afDb.object("retailers/"+e+"/role").valueChanges().subscribe(function(r){return t.getUserName(e),console.log("user value from getUserRole..is..",r),"true"===r?(console.log("Inside the if codition of getUserRole",r),localStorage.setItem("isAdmin","true"),!0):(console.log("user details",r),localStorage.setItem("isAdmin","false"),!1)})},e.prototype.getUserName=function(e){return this.afDb.object("retailers/"+e+"/displayName").valueChanges().subscribe(function(e){var t=String(e);localStorage.setItem("userName",t)})},e.prototype.getUserNameValue=function(){return localStorage.getItem("userName")},e.prototype.getUserRoleValue=function(){return localStorage.getItem("isAdmin")},e.prototype.getUserId=function(){return localStorage.getItem("userId")},e.prototype.getUserDetails=function(e){return this.distributor=null,this.afDb.object("retailers/"+e).valueChanges().subscribe(function(e){console.log("user details",e.role)})},e.prototype.getUserFullDetails=function(e){return this.distributor=null,this.afDb.object("retailers/"+e).valueChanges().subscribe(function(e){console.log("user details",e),localStorage.setItem("userDetails",JSON.stringify(e))})},e.prototype.login=function(e,t){return r=this,void 0,o=function(){var r,n,o=this;return function(e,t){var r,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(i){s=[6,i],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}}(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.afAuth.auth.signInWithEmailAndPassword(e,t).then(function(e){var t=e.user.uid;localStorage.setItem("userId",e.user.uid);var n=o.getUserRole(t);console.log("User role from login metheod..",n),r=!0,o.message=t}).catch(function(e){o.message=e.message,r=!1})];case 1:return s.sent(),[3,3];case 2:return n=s.sent(),alert("Error!"+n.message),r=!1,[3,3];case 3:return[2,r]}})},new((n=void 0)||(n=Promise))(function(e,t){function s(e){try{i(o.next(e))}catch(r){t(r)}}function a(e){try{i(o.throw(e))}catch(r){t(r)}}function i(t){t.done?e(t.value):new n(function(e){e(t.value)}).then(s,a)}i((o=o.apply(r,[])).next())});var r,n,o},e.prototype.resetPassword=function(e){e||alert("Type in your email first"),this.afAuth.auth.sendPasswordResetEmail(e).then(function(){return alert("A password reset link has been sent to your email address")},function(e){return alert(e)}).catch(function(e){return alert("An error occurred while attempting to reset your password")})},e.prototype.updatePassword=function(e,t,r){var n=this;this.afAuth.auth.signInWithEmailAndPassword(e,t).then(function(e){n.afAuth.auth.currentUser.updatePassword(r).then(function(e){console.log(e),alert("password updated")}).catch(function(e){console.log(e),alert("Some thing went wrong...")})}).catch(function(e){n.message=e.message,alert(e.message)})},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e(i.inject(u.a),i.inject(l.a),i.inject(c.l))},token:e,providedIn:"root"}),e}()},ug5D:function(e,t,r){"use strict";r.r(t);var n=r("3iKN"),o=r("r1H1"),s=r("ajRK"),a=r("TaJz"),i=r("RgTm"),u=r("o23d"),l=r("AkMW"),c=r("aEbr");r.d(t,"AngularFireDatabase",function(){return n.a}),r.d(t,"RealtimeDatabaseURL",function(){return n.b}),r.d(t,"listChanges",function(){return o.a}),r.d(t,"createListReference",function(){return s.a}),r.d(t,"snapshotChanges",function(){return a.a}),r.d(t,"stateChanges",function(){return i.a}),r.d(t,"auditTrail",function(){return u.a}),r.d(t,"fromRef",function(){return l.a}),r.d(t,"AngularFireDatabaseModule",function(){return c.a})}}]);